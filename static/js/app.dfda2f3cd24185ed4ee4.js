webpackJsonp([2],[,,,,,,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1),o=t(9),i=t(14),a=t(42),s=t.n(a);r.a.use(s.a),r.a.config.productionTip=!1,new r.a({el:"#app",router:i.a,template:"<App/>",components:{App:o.a}})},,,function(e,n,t){"use strict";function r(e){t(10)}var o=t(12),i=t(13),a=t(0),s=r,c=a(o.a,i.a,!1,s,"data-v-096e3a71",null);n.a=c.exports},function(e,n){},,function(e,n,t){"use strict";n.a={name:"app"}},function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("header",[t("router-link",{attrs:{to:"/",tag:"span"}},[e._v("Lok Lok Shader Editing Helper")]),e._v(" "),e._m(0,!1,!1)],1),e._v(" "),t("main",[t("router-view")],1)])},o=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("span",[e._v("No DB yet. Work in progress. "),t("a",{staticClass:"todo",attrs:{target:"_blank",href:"https://docs.google.com/document/d/1tfKqN32Idr6QphLVCSCzAE918Aj-J30WR3ITV4bvXXg/edit"}},[e._v("Todo List.")])])}],i={render:r,staticRenderFns:o};n.a=i},function(e,n,t){"use strict";var r=t(1),o=t(15),i=t(16),a=t(20);r.a.use(o.a),n.a=new o.a({routes:[{path:"/",component:i.a},{path:"/editor",component:a.a}]})},,function(e,n,t){"use strict";function r(e){t(17)}var o=t(18),i=t(19),a=t(0),s=r,c=a(o.a,i.a,!1,s,null,null);n.a=c.exports},function(e,n){},function(e,n,t){"use strict";n.a={name:"hello",data:function(){return{}},methods:{},mounted:function(){}}},function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"hello"},[t("router-link",{attrs:{to:"/editor"}},[e._v("Editor (no DB)")])],1)},o=[],i={render:r,staticRenderFns:o};n.a=i},function(e,n,t){"use strict";function r(e){t(21)}var o=t(22),i=t(41),a=t(0),s=r,c=a(o.a,i.a,!1,s,null,null);n.a=c.exports},function(e,n){},function(e,n,t){"use strict";var r=t(23),o=t.n(r),i=t(25),a=t(27),s=t(40);n.a={components:{ACE:a.a,draggable:o.a},data:function(){return{iframeLink:!1,iwindow:!1,iframer:!1,complier:i.a,projectFiles:[],ace:{height:window.innerHeight-50},current:{file:{path:"@/main.js",src:"//Welcome! Loading....."}},newFilePath:"@/src/newFile.js",isDirty:!1,clean:function(){},blob:!1,compiling:!1}},mounted:function(){var e=this;window.addEventListener("beforeunload",function(n){e.closeWindow()},!1),setInterval(function(){e.isDirty&&(e.isDirty=!1,e.compileFiles())},3333),setTimeout(function(){e.projectFiles=Object(s.a)({author:"loklok"}),e.current.file=e.projectFiles[0],e.compileFiles()},1e3);var n=function(n){e.compiling=!1,e.onCompleteCompile({js:n.data.js})};this.clean=i.a.setUp({onWorker:n})},beforeDestroy:function(){this.clean(),this.iwindow&&this.iwindow.close()},methods:{checkDisable:function(e){return"@/index.html"===e||"@/main.js"===e},getHTML:function(e){var n=e.js,t=(this.projectFiles||[]).filter(function(e){return"@/index.html"===e.path})[0].src;return t=Object(s.b)({html:t,js:n})},onCompleteCompile:function(e){var n=e.js;this.blob=new Blob([this.getHTML({js:n})],{type:"text/html"}),this.blob&&URL.revokeObjectURL(this.blob),this.iframeLink=URL.createObjectURL(this.blob),this.iframer&&(this.iframer=this.iframeLink),this.iwindow&&(this.iwindow.postMessage({type:"suspend-close",duration:6e3},window.location.origin),this.iwindow.location.assign(this.iframeLink))},compileFiles:function(){this.compiling=!0,i.a.compile({files:this.projectFiles})},newFile:function(e){var n=e.path;this.projectFiles.push(Object(s.c)({path:n}))},setFile:function(e){this.current.file=e},openWindow:function(){var e=this;if(this.iframeLink){var n="menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes";n="directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width="+window.innerWidth+",height="+window.innerHeight,this.iwindow=window.open(this.iframeLink,"title",n),this.iwindow.onmessage=function(n){"close"===n.data.type&&e.closeWindow()}}},openiFrame:function(){this.iframeLink&&(this.iframer=this.iframeLink)},closeiFrame:function(){this.iframer=!1},closeWindow:function(){this.iwindow&&(this.iwindow.close(),this.iwindow=!1)}}}},,,function(module,__webpack_exports__,__webpack_require__){"use strict";function makeEventBus(){var e={},n={};return n.on=function(n,t){e[n]||(e[n]=[]),e[n].push(t)},n.once=function(e,t){var r=function e(r){t(r),n.off(e)};n.on(e,r)},n.off=function(n,t){e[n]||(e[n]=[]);var r=e[n].indexOf(t);e[n].splice(r,1)},n.trigger=function(n,t){e[n]||(e[n]=[]);for(var r=0;r<e[n].length;r++)e[n][r].call({},t)},n}var __WEBPACK_IMPORTED_MODULE_0__components_worker_babel_worker_js__=__webpack_require__(26),__WEBPACK_IMPORTED_MODULE_0__components_worker_babel_worker_js___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_worker_babel_worker_js__),worker=new __WEBPACK_IMPORTED_MODULE_0__components_worker_babel_worker_js___default.a,buzz=makeEventBus(),onMessage=function onMessage(evt){buzz.trigger("worker",evt),eval(evt.data.data)};worker.onmessage=onMessage,setInterval(function(){worker&&(worker.terminate(),worker=new __WEBPACK_IMPORTED_MODULE_0__components_worker_babel_worker_js___default.a,worker.onmessage=onMessage)},3e4),__webpack_exports__.a={compile:function(e){var n=e.files;worker.postMessage({files:n})},setUp:function(e){var n=e.onWorker;return buzz.on("worker",n),function(){buzz.off("worker",n)}}}},function(e,n,t){e.exports=function(){return new Worker(t.p+"f8c944a200d09a8e94c8.worker.js")}},function(e,n,t){"use strict";function r(e){t(28)}var o=t(29),i=t(39),a=t(0),s=r,c=a(o.a,i.a,!1,s,null,null);n.a=c.exports},function(e,n){},function(e,n,t){"use strict";var r=t(30);t.e(0).then(function(){var e=[t(43)];(function(e){window.emmet=e.emmet}).apply(null,e)}).catch(t.oe),n.a={template:"",props:{value:{},filepath:{type:String,default:"lol.js"},theme:String,height:!0,width:!0},data:function(){return{editor:null,contentBackup:""}},methods:{px:function(e){return/^\d*$/.test(e)?e+"px":e},getLangFromPath:function(e){var n="html";try{var t=e.split(".").pop();"js"===t&&(n="javascript"),"vue"===t&&(n="html"),"html"===t&&(n="html"),"vert"===t&&(n="glsl"),"frag"===t&&(n="glsl")}catch(e){console.log(e)}return n}},watch:{value:function(e){this.contentBackup!==e&&this.editor.setValue(e,1)},filepath:function(){this.editor.getSession().setMode("ace/mode/"+this.getLangFromPath(this.filepath))}},mounted:function(){var e=this,n=this,o=this.theme||"chrome";t(31);var i=n.editor=r.edit(this.$el),a=[{name:"save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(n){var t=n.getValue();e.$emit("save",t)},readOnly:!0},{name:"multicursor",bindKey:{win:"Ctrl-D",mac:"Command-D"},exec:function(e){e.selectMore(1)},scrollIntoView:"cursor",readOnly:!0}];Array.isArray(a)&&a.forEach(function(e){n.editor.commands.addCommand(e)}),t(32),t(35),t(36),t(37),t(38),i.$blockScrolling=1/0,i.setOption("enableEmmet",!0),i.getSession().setMode("ace/mode/"+this.getLangFromPath(this.filepath)),i.setTheme("ace/theme/"+o),i.setValue(this.value,1),i.session.setOptions({tabSize:2,useSoftTabs:!0}),i.on("change",function(){var e=i.getValue();n.$emit("input",e),n.contentBackup=e})}}},,,,,,,,,,function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{style:{height:e.height?e.px(e.height):"100%",width:e.width?e.px(e.width):"100%"}})},o=[],i={render:r,staticRenderFns:o};n.a=i},function(e,n,t){"use strict";function r(e){return'<script src="'+e+'"><\/script>'}function o(){return"\x3c!--DO_NOT_REMOVE_ME____AUTO_INIT--\x3e"}function i(e){return'<!DOCTYPE html>\n<html>\n  <head>\n  <meta charset="UTF-8">\n  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n  <meta name="viewport" content="width=device-width,initial-scale=1">\n  <title>component</title>\n  <meta name="author" content="'+e.author+'">\n  <meta name="description" content="WebGL Art">\n  <meta name="keywords" content="WebGL, Art">\n\n  \x3c!--\n  '+r("https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.2/vue.min.js")+"\n  "+r("https://cdnjs.cloudflare.com/ajax/libs/vue-router/3.0.1/vue-router.min.js")+"\n  "+r("https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js")+'\n  --\x3e\n\n  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.min.js" integrity="sha256-6fhm481uY9c152qGWIVgE7KbzaCj5WjCi3BGIpZef2E=" crossorigin="anonymous"><\/script>\n  <script src="https://threejs.org/examples/js/GPUComputationRenderer.js"><\/script>\n\n  <style type="text/css">\n    html, body {\n      width: 100%;\n      height: 100%;\n      margin: 0px;\n      padding: 0px;\n    }\n  </style>\n  </head>\n  <body>\n    <div id="app"></div>\n    '+o()+"\n  </body>\n</html>"}function a(e){return{path:e.path||"@/newFile.js",src:""}}function s(e){var n=e.html,t=e.js;return n.replace(o(),'<script type="text" id="initAPP">'+t+"<\/script><script>\n  (function(){\n    var js = document.getElementById('initAPP').innerHTML;\n    var blob = new Blob([js], { type: 'text/html' });\n    var url = URL.createObjectURL(blob);\n\n    var scpt = document.createElement('script');\n    scpt.src = url;\n    document.body.appendChild(scpt);\n\n    var suspendClose = false;\n\n    window.addEventListener('message', ({ data }) => {\n      if (data.type === 'suspend-close') {\n        suspendClose = true;\n        setTimeout(() => {\n          suspendClose = false;\n        }, data.duration);\n      }\n    })\n\n    window.addEventListener('beforeunload', (e) => {\n      if (!suspendClose) {\n        window.top.postMessage({ type: 'close' }, window.location.origin)\n      }\n    }, false)\n\n  }())\n\n//<\/script>")}function c(e){return[{path:"@/index.html",src:i({author:e.author})},{path:"@/main.js",src:"//\nimport app from '@/src/app.js'\n"},{path:"@/src/app.js",src:"\nimport { makeAPI } from '@/src/webgl/particle.js';\n\nvar api = makeAPI();\napi.setup({ target: document.getElementById('app') });\n\nvar clean = () => {\n  api.clean()\n};\n\n//\n"},{path:"@/src/webgl/events.js",src:"//\nexport default ({ target, stack }) => {\n  var mod = {};\n\n  mod.sendEvent = (args) => {\n      for (var key in stack) {\n          stack[key](args)\n      }\n  }\n\n  var ev = mod.evlt = {\n  resizer: () => {\n    if (!target) { return }\n    mod.rect = target.getBoundingClientRect()\n    mod.aspect = mod.rect.width / mod.rect.height\n    mod.sendEvent({ type: 'resize', aspect: mod.aspect, rect: mod.rect })\n  },\n  tsData: false,\n  tmData: false,\n  emitClick: false,\n  onTS: (evt) => {\n    evt.preventDefault()\n    ev.tsData = { type: 'click', isIn: true, touches: evt.touches, pageX: evt.touches[0].pageX, pageY: evt.touches[0].pageY, rect: mod.rect }\n    ev.emitClick = true\n    setTimeout(() => {\n      ev.emitClick = false\n    }, 300)\n    mod.sendEvent({ type: 'ts', isIn: true, touches: evt.touches, pageX: evt.touches[0].pageX, pageY: evt.touches[0].pageY, rect: mod.rect })\n  },\n  onTM: (evt) => {\n    evt.preventDefault()\n    mod.sendEvent({ type: 'tm', touches: evt.touches, pageX: evt.touches[0].pageX, pageY: evt.touches[0].pageY, rect: mod.rect })\n  },\n  onTE: (evt) => {\n    if (ev.emitClick) {\n      ev.emitClick = false\n      mod.sendEvent(ev.tsData)\n    }\n    mod.sendEvent({ type: 'te', isIn: false })\n  },\n  onMDN: (evt) => {\n    mod.sendEvent({ type: 'mdn', pageX: evt.clientX, pageY: evt.clientY, rect: mod.rect })\n  },\n  onMUP: (evt) => {\n    mod.sendEvent({ type: 'mup', pageX: evt.clientX, pageY: evt.clientY, rect: mod.rect })\n  },\n  onMV: (evt) => {\n    evt.preventDefault()\n    mod.sendEvent({ type: 'mv', pageX: evt.pageX, pageY: evt.pageY, rect: mod.rect })\n  },\n  onMO: (evt) => {\n    mod.sendEvent({ isIn: true })\n  },\n  onME: (evt) => {\n    mod.sendEvent({ isIn: true })\n  },\n  onML: (evt) => {\n    mod.sendEvent({ isIn: false })\n  },\n  onCL: (evt) => {\n    mod.sendEvent({ type: 'click', pageX: evt.pageX, pageY: evt.pageY, rect: mod.rect })\n  },\n  onWHL: (evt) => {\n    mod.sendEvent({ type: 'wheel', deltaX: evt.deltaX, deltaY: evt.deltaY })\n  }\n  }\n  ev.resizer()\n\n  var container = target\n  container.addEventListener('mouseover', ev.onMO, false)\n  container.addEventListener('mouseenter', ev.onME, false)\n  container.addEventListener('mouseleave', ev.onML, false)\n\n  container.addEventListener('mousemove', ev.onMV, false)\n  container.addEventListener('mousedown', ev.onMDN, false)\n  container.addEventListener('mouseup', ev.onMUP, false)\n\n  container.addEventListener('click', ev.onCL, false)\n  container.addEventListener('wheel', ev.onWHL, false)\n\n  container.addEventListener('touchstart', ev.onTS, false)\n  container.addEventListener('touchmove', ev.onTM, false)\n  container.addEventListener('touchend', ev.onTE, false)\n  container.style['-webkit-tap-highlight-color'] = 'rgba(0,0,0,0)'\n  window.addEventListener('resize', ev.resizer, false)\n  mod.uninstaller = () => {\n    container.removeEventListener('mouseover', ev.onMO)\n    container.removeEventListener('mouseenter', ev.onME)\n    container.removeEventListener('mouseleave', ev.onML)\n\n    container.removeEventListener('mousemove', ev.onMV)\n    container.removeEventListener('mousedown', ev.onMDN)\n    container.removeEventListener('mouseup', ev.onMUP)\n\n    container.removeEventListener('click', ev.onCL)\n    container.removeEventListener('wheel', ev.onWHL)\n\n    container.removeEventListener('touchstart', ev.onTS)\n    container.removeEventListener('touchmove', ev.onTM)\n    container.removeEventListener('touchend', ev.onTE)\n    window.removeEventListener('resize', ev.resizer)\n  }\n\n  return mod;\n}\n"},{path:"@/src/webgl/particle.js",src:"\n//\nvar THREE = window.THREE\n\nimport setupEvents from '@/src/webgl/events.js';\n\nexport function makeAPI() {\n    var api = {}\n\n    var WIDTH = 128\n\n    api.eventStack = {};\n    api.setup = ({\n        target\n    }) => {\n        var renderer = new THREE.WebGLRenderer({\n            alpha: true\n        })\n        api.compute = setupCompute({\n            renderer\n        })\n        api.render = setupRender({\n            renderer,\n            target\n        })\n        api.events = setupEvents({\n            target,\n            stack: api.eventStack\n        })\n        api.loop = setupLoop()\n    }\n\n    api.clean = () => {\n        api.loop.stop()\n    }\n\n    var setupLoop = () => {\n        var rAF = () => {\n            api.rAFID = window.requestAnimationFrame(rAF)\n\n            var result = api.compute.run()\n            api.render.run({\n                compute: result\n            })\n        }\n        api.rAFID = window.requestAnimationFrame(rAF)\n\n        return {\n            stop() {\n                window.cancelAnimationFrame(api.rAFID)\n            }\n        }\n    }\n\n    var makeAnimatable = ({\n        scene\n    }) => {\n\n        var particleV = require('@/src/webgl/particle/particle.vert');\n        var particleF = require('@/src/webgl/particle/particle.frag');\n\n        var geometry = new THREE.PlaneBufferGeometry(30, 30, WIDTH - 1, WIDTH - 1);\n        var material = new THREE.ShaderMaterial({\n            blending: THREE.AdditiveBlending,\n            depthTest: false,\n            transparent: true,\n            vertexShader: particleV.default,\n            fragmentShader: particleF.default,\n            uniforms: {\n                resolution: {\n                    value: new THREE.Vector2(window.innerWidth, window.innerHeight),\n                },\n                picture: {\n                    value: new THREE.TextureLoader().load('https://pixabay.com/get/eb3cb50a2cf4023ed1584d05fb09449ee471e4c818b4104096f8c67fa4e8/heart-2945403_1280.jpg')\n                },\n                pointSize: {\n                    value: window.devicePixelRatio || 1.0\n                },\n                posTex: {\n                    value: null\n                },\n                velTex: {\n                    value: null\n                }\n            }\n        })\n\n        var points = new THREE.Points(geometry, material)\n        points.matrixAutoUpdate = false\n        points.updateMatrix()\n\n        scene.add(points)\n\n        return {\n            material,\n            points\n        }\n    }\n\n    var setupRender = ({\n        renderer,\n        target\n    }) => {\n        var mod = {}\n\n        var scene = new THREE.Scene();\n        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.01, 1000);\n        camera.position.z = 165;\n\n        renderer.setSize(window.innerWidth, window.innerHeight);\n        renderer.setPixelRatio(window.devicePixelRatio || 1.0)\n        target.appendChild(renderer.domElement);\n\n        setTimeout(() => {\n            renderer.domElement.style.marginBottom = '-6px'\n        }, 10)\n\n        api.eventStack.setSize = ({\n            type,\n            rect,\n            aspect\n        }) => {\n            if (type === 'resize' && rect) {\n                renderer.setSize(rect.width, rect.height + 6)\n                camera.aspect = aspect;\n                camera.updateProjectionMatrix()\n            }\n        }\n\n        scene.background = new THREE.Color(0x000000);\n\n        var anim = makeAnimatable({\n            scene\n        })\n\n        mod.run = () => {\n            var {\n                velTex,\n                posTex\n            } = api.compute.getTex()\n\n            anim.material.uniforms.posTex.value = posTex\n            anim.material.uniforms.velTex.value = velTex\n\n            renderer.render(scene, camera);\n        }\n\n        return mod\n    }\n\n\n\n    var setupCompute = ({\n        renderer\n    }) => {\n        var mod = {}\n\n        function fillTexture(texture, WIDTH) {\n\n            var pixels = texture.image.data\n            var p = 0\n            for (var j = 0; j < WIDTH; j++) {\n                for (var i = 0; i < WIDTH; i++) {\n                    var x = (WIDTH / 2 - i) * 128 / WIDTH\n                    var y = (WIDTH / 2 - j) * 128 / WIDTH\n\n                    pixels[p + 0] = x\n                    pixels[p + 1] = y\n\n                    pixels[p + 2] = 0 // noise(Math.sin(x), Math.sin(y), 0.0)\n                    pixels[p + 3] = 0\n                    p += 4\n                }\n            }\n        }\n\n        var gpuCompute = new GPUComputationRenderer(WIDTH, WIDTH, renderer);\n\n        // Create initial state float textures\n        var pos0 = gpuCompute.createTexture();\n        var vel0 = gpuCompute.createTexture();\n        // and fill in here the texture data...\n        fillTexture(pos0, WIDTH)\n\n        // Add texture variables\n        var velTexSD = require('@/src/webgl/particle/velocitySim.frag');\n        var posTexSD = require('@/src/webgl/particle/positionSim.frag');\n\n        var velVar = gpuCompute.addVariable('velTex', velTexSD.default, pos0);\n        var posVar = gpuCompute.addVariable('posTex', posTexSD.default, vel0);\n\n        // Add variable dependencies\n        gpuCompute.setVariableDependencies(velVar, [velVar, posVar]);\n        gpuCompute.setVariableDependencies(posVar, [velVar, posVar]);\n\n        // Add custom uniforms\n        velVar.material.uniforms = {\n            time: {\n                value: 0.0\n            },\n            mouse: {\n                value: new THREE.Vector2(0, 0)\n            }\n        }\n\n        api.eventStack.mousePos = ({\n            type,\n            pageX,\n            pageY,\n            rect\n        }) => {\n            var velocity = velVar.material.uniforms.mouse.value;\n            if (type === 'mv' && rect) {\n                velocity.x = ((pageX - rect.left) / rect.width) * 2 - 1\n                velocity.y = -((pageY - rect.top) / rect.height) * 2 + 1\n            } else if (type === 'tm' && rect) {\n                velocity.x = ((pageX - rect.left) / rect.width) * 2 - 1\n                velocity.y = -((pageY - rect.top) / rect.height) * 2 + 1\n            }\n        }\n\n        // Check for completeness\n        var error = gpuCompute.init();\n        if (error !== null) {\n            alert(error);\n            console.error(error);\n        }\n        mod.getTex = () => {\n            return {\n                velTex: gpuCompute.getCurrentRenderTarget(velVar).texture,\n                posTex: gpuCompute.getCurrentRenderTarget(posVar).texture\n            }\n        };\n\n        mod.run = () => {\n            velVar.material.uniforms.time.value = window.performance.now() / 1000\n            gpuCompute.compute();\n        }\n        return mod\n    }\n\n    return api;\n}\n\n\n//\n\n\n      "},{path:"@/src/webgl/particle/particle.vert",src:"\n\nuniform sampler2D posTex;\nuniform sampler2D velTex;\n\nuniform float pointSize;\n\nvarying vec4 parVel;\nvarying vec2 vUv;\n\nvoid main() {\n    vec4 pos = texture2D(posTex, uv);\n    vec4 vel = texture2D(velTex, uv);\n\n    vec4 mvPosition = modelViewMatrix * vec4( pos.xyz, 1.0 );\n    vec4 outputPos = projectionMatrix * mvPosition;\n\n    vUv = uv;\n    parVel = vel;\n    gl_Position = outputPos;\n    gl_PointSize = pointSize * 1.0;\n}\n\n\n      "},{path:"@/src/webgl/particle/particle.frag",src:"\n\nvarying vec4 parVel;\nvarying vec2 vUv;\nuniform sampler2D picture;\n\nvoid main() {\n\n    vec4 rainbow = parVel;\n\n// vec4 outputColor = vec4(\n//         (rainbow.x + 0.6),\n//         (rainbow.y * rainbow.x + 0.6),\n//         (rainbow.y + 0.6),\n//         0.25\n//     );\n// outputColor.xyz = clamp(outputColor.xyz, vec3(0.0), vec3(1.0));\n    vec4 imgColor = texture2D(picture, vUv);\n\n    vec4 outputColor = vec4(0.5, 0.5, 0.5, 0.5) * imgColor;\n\n    gl_FragColor = outputColor;\n}\n\n"},{path:"@/src/webgl/particle/velocitySim.frag",src:"\n\nuniform float time;\nuniform vec2 mouse;\nfloat constrain(float val, float min, float max) {\n    if (val < min) {\n        return min;\n    } else if (val > max) {\n        return max;\n    } else {\n        return val;\n    }\n}\n\nvec3 getDiff (in vec3 lastPos, in vec3 mousePos) {\n  vec3 diff = lastPos.xyz / 33.3 - mousePos;\n  float distance = constrain(length(diff), 5.0, 100.0);\n  float strength = 0.35 / (distance * distance);\n\n  diff = normalize(diff);\n  diff = diff * strength * -2.0;\n\n  return diff;\n}\n\nvoid main() {\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n  vec4 lastVel = texture2D( velTex, uv );\n    vec4 lastPos = texture2D( posTex, uv );\n\n    vec3 diff = getDiff( lastPos.xyz, vec3(mouse, 0.1) );\n    lastVel.xyz += diff * 15.0;\n\n    gl_FragColor = lastVel;\n}\n"},{path:"@/src/webgl/particle/positionSim.frag",src:"\n\n#include <common>\n\n//  Classic Perlin 3D Noise\n//  by Stefan Gustavson\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec2 fade(vec2 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat cnoise(vec2 P){\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, 289.0); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n  vec4 i = permute(permute(ix) + iy);\n  vec4 gx = 2.0 * fract(i * 0.0243902439) - 1.0; // 1/41 = 0.024...\n  vec4 gy = abs(gx) - 0.5;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n  vec4 norm = 1.79284291400159 - 0.85373472095314 *\n      vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\n#define M_PI 3.1415926535897932384626433832795\nfloat atan2(in float y, in float x) {\n  bool xgty = (abs(x) > abs(y));\n  return mix(M_PI/2.0 - atan(x,y), atan(y,x), float(xgty));\n}\nvec3 fromBall(float r, float az, float el) {\n  return vec3(\n    r * cos(el) * cos(az),\n    r * cos(el) * sin(az),\n    r * sin(el)\n  );\n}\nvoid toBall(vec3 pos, out float az, out float el) {\n  az = atan2(pos.y, pos.x);\n  el = atan2(pos.z, sqrt(pos.x * pos.x + pos.y * pos.y));\n}\n\n// float az = 0.0;\n// float el = 0.0;\n// vec3 noiser = vec3(lastVel);\n// toBall(noiser, az, el);\n// lastVel.xyz = fromBall(1.0, az, el);\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n  vec4 lastVel = texture2D( velTex, uv );\n    vec4 lastPos = texture2D( posTex, uv );\n\n    float az = 0.0;\n    float el = 0.0;\n    vec3 noiser = vec3(lastPos);\n\n    noiser += rand(lastVel.xy) * 0.0000001;\n\n    // noiser += cnoise(lastPos.xy) * 2.5;\n    // noiser += sin(lastPos.x * 0.3) * 2.5;\n    // noiser += sin(lastPos.y * 0.3) * 2.5;\n\n    toBall(noiser, az, el);\n    lastPos.xyz = fromBall(65.0, az, el);\n    lastPos.xyz += lastVel.xyz;\n\n    gl_FragColor = lastPos;\n}\n\n\n"}]}n.c=a,n.b=s,n.a=c},function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{ref:"container"},[e.projectFiles.length>0?t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newFilePath,expression:"newFilePath"}],domProps:{value:e.newFilePath},on:{input:function(n){n.target.composing||(e.newFilePath=n.target.value)}}}),e._v(" "),t("button",{on:{click:function(){e.newFile({path:e.newFilePath})}}},[e._v("Add File")]),e._v(" "),t("button",{attrs:{disabled:e.compiling},on:{click:function(){e.compileFiles()}}},[e._v("Compile Files")]),e._v(" "),e.iwindow||e.compiling?e._e():t("button",{on:{click:function(){e.openWindow()}}},[e._v("OpenWindow")]),e._v(" "),e.iwindow?t("button",{on:{click:function(){e.closeWindow()}}},[e._v("closeWindow")]):e._e(),e._v(" "),e.iframer||e.compiling?e._e():t("button",{on:{click:function(){e.openiFrame()}}},[e._v("OpenIframe")]),e._v(" "),e.iframer?t("button",{on:{click:function(){e.closeiFrame()}}},[e._v("closeIframe")]):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.compiling,expression:"compiling"}]},[e._v("Compiling")]),e._v(" "),t("draggable",{attrs:{options:{group:"people"}},on:{start:function(n){e.drag=!0},end:function(n){e.drag=!1},change:function(){e.compileFiles()}},model:{value:e.projectFiles,callback:function(n){e.projectFiles=n},expression:"projectFiles"}},e._l(e.projectFiles,function(n,r){return t("div",{key:r},[t("input",{directives:[{name:"model",rawName:"v-model",value:n.path,expression:"pFile.path"}],staticStyle:{"font-size":"16px",width:"300px"},attrs:{disabled:e.checkDisable(n.path)},domProps:{value:n.path},on:{input:function(t){t.target.composing||e.$set(n,"path",t.target.value)}}}),e._v(" "),t("button",{on:{click:function(t){e.setFile(n)}}},[e._v("Edit")])])})),e._v(" "),e.iframer?t("iframe",{attrs:{src:e.iframer}}):e._e(),e._v(" "),t("ACE",{attrs:{filepath:e.current.file.path,theme:"chrome",width:"100%",height:e.ace.height},on:{save:function(){e.compileFiles()},input:function(n){e.isDirty=!0}},model:{value:e.current.file.src,callback:function(n){e.$set(e.current.file,"src",n)},expression:"current.file.src"}})],1):t("div",[e._v("\n    Loading......\n  ")])])},o=[],i={render:r,staticRenderFns:o};n.a=i}],[6]);
//# sourceMappingURL=app.dfda2f3cd24185ed4ee4.js.map